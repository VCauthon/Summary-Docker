
## Containerize flow

Docker aims to make it easy to build, ship and run applications. We call this _containerization_ and the process looks like this:

1. Write your applications
2. Define a list of all dependencies
3. Create a Docker that tells Docker how to build and run the app
4. Build the app into an image
5. Push the image ot a registry (optional)
6. Run a container from the image

This flow can be summarized into the following diagram:

![image](./static/0_introduction/deploy_flow.png)

## Publishing an image into the DockerHub

Let's say we want to make the image we created in [the first exercise](../exercises/0-the-first-image/README.md) public, that is, we want everyone to be able to run cowsay.

To do this, we need to use a registry. There are several, but we are going to use a free one like [hub docker](https://hub.docker.com). In order to register our image in this repository we must first have an account.

Once the account has been generated, we must create a repository where the different cowsays images will be registered.

![image](./static/0_introduction/create_repository.png)

Once we have generated our repository we can go back to our original task, i.e. public cowsay image. To do this we need to log in to Docker Hub via `docker login`.

> NOTE: When executing this command, we will be shown the instructions to be able to log in.

Once logged in we must include a new tag on our existing image (in case it is not displayed with the `docker images` command, go back to cowsay's [exercise](../exercises/0-the-first-image/README.md) to recreate it).

Tags are necessary to publish images to a repository, as they define the account and the repository itself. In my case, if I were to push the cowsays image as is, I would publish the image to a repository called cowsay.

```bash
docker images
REPOSITORY   TAG                  IMAGE ID       CREATED        SIZE
cowsay       latest               dbdf27b44e96   14 hours ago   282MB
```

As the repository we created is called `cowsays` it should work as is, however... if we do a `push` we will see the following:

```bash
docker push cowsay:latest
The push refers to repository [docker.io/library/cowsay]
a73d74ee7120: Waiting 
1f4a3d643eb9: Waiting 
155ad54a8b28: Waiting 
ed39b113210b: Waiting 
push access denied, repository does not exist or may require authorization: server message: insufficient_scope: authorization failed
```

This is because the image we are posting is missing information in the tag, namely the account where it will be posted. If we go back to the previous image we can see that the account is `joeyratt`.

This means that we must generate a new tag over the existing image where all the information is included:
```bash
docker tag cowsay:latest joeyratt/cowsay:latter
```

After this action, we can publish the image via the `push` command.

```bash
docker push joeyratt/cowsay:latest
The push refers to repository [docker.io/joeyratt/cowsay]
1f4a3d643eb9: Pushed
155ad54a8b28: Pushed
ed39b113210b: Pushed
a73d74ee7120: Pushed
latter: digest: sha256:dbdf27b44e960394f4a5783c1dea13c37b98618c96b7d10dc7ab8cca92e1454d size: 855
```

After these steps we can say that we have published a docker image in your registry. We will be able to access this registry from any computer with an internet connection.

In order to test it we are going to delete all the images from our local repository and make a run of `joeyratt/cowsay:latest`, let's see what happens...

```bash
# Here we are checking that there is no images in our local repo
docker images
REPOSITORY   TAG       IMAGE ID   CREATED   SIZE
# Here we are downloading our published image in docker
docker run joeyratt/cowsay:latest
Unable to find image 'joeyratt/cowsay:latest' locally
latest: Pulling from joeyratt/cowsay
Digest: sha256:d821dbf36dbb3fbf8438a7a29933955e1366bde60dbbc60683c47c4ad90e9147
Status: Downloaded newer image for joeyratt/cowsay:latest
 _______________________________________
/ I hope your day is going well because \
\ mine is going phenomenal              /
 ---------------------------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||
```

## Keywords into the Dockerfile

